@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom CSS Variables */
:root {
  --font-inter: 'Inter', system-ui, sans-serif;
}

/* Base Styles */
html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-inter);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom Component Styles */
@layer components {
  .btn-primary {
    @apply inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200;
  }

  .btn-secondary {
    @apply inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200;
  }

  .card {
    @apply bg-white rounded-xl shadow-sm border border-gray-200 p-6;
  }

  .card-hover {
    @apply card hover:shadow-lg transition-shadow duration-200;
  }
}

/* Custom Utility Classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }
}

/* PWA Specific Styles */
@media (display-mode: standalone) {
  body {
    /* Styles for when app is installed as PWA */
    user-select: none;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
  }

  /* Allow text selection in content areas */
  .selectable {
    user-select: text;
    -webkit-user-select: text;
  }

  /* Fix button sizing and spacing issues in PWA mode */
  .inline-flex {
    /* Ensure consistent flex behavior */
    display: -webkit-inline-flex !important;
    display: inline-flex !important;
  }

  /* Fix button hover states in PWA */
  button,
  .btn-primary,
  .btn-secondary,
  [role='button'] {
    /* Force hardware acceleration for smooth transitions */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform, background-color, box-shadow;

    /* Ensure proper touch targets */
    min-height: 44px;
    min-width: 44px;
  }

  /* Fix spacing issues between buttons */
  .space-x-4 > * + * {
    margin-left: 1rem !important;
  }

  .space-x-3 > * + * {
    margin-left: 0.75rem !important;
  }

  .space-x-2 > * + * {
    margin-left: 0.5rem !important;
  }

  /* Fix positioning for tooltips and copy buttons */
  .relative {
    position: relative !important;
  }

  .absolute {
    position: absolute !important;
  }

  /* Fix z-index layering issues in PWA */
  .z-50 {
    z-index: 50 !important;
  }

  /* Fix gradient backgrounds in PWA - CRITICAL FIX */
  .bg-gradient-to-r {
    background: linear-gradient(to right, var(--tw-gradient-stops)) !important;
    background-attachment: scroll !important;
    -webkit-background-attachment: scroll !important;
  }

  .bg-gradient-to-br {
    background: linear-gradient(
      to bottom right,
      var(--tw-gradient-stops)
    ) !important;
    background-attachment: scroll !important;
    -webkit-background-attachment: scroll !important;
  }

  /* Specific gradient color fixes */
  .from-emerald-600.to-teal-600 {
    --tw-gradient-from: #059669 !important;
    --tw-gradient-to: #0d9488 !important;
    --tw-gradient-stops:
      var(--tw-gradient-from), var(--tw-gradient-to) !important;
    background: linear-gradient(to right, #059669, #0d9488) !important;
  }

  .hover\:from-emerald-700:hover.hover\:to-teal-700:hover {
    background: linear-gradient(to right, #047857, #0f766e) !important;
  }

  .from-emerald-500.to-teal-600 {
    --tw-gradient-from: #10b981 !important;
    --tw-gradient-to: #0d9488 !important;
    --tw-gradient-stops:
      var(--tw-gradient-from), var(--tw-gradient-to) !important;
    background: linear-gradient(to right, #10b981, #0d9488) !important;
  }

  /* Fix SVG fill colors in PWA */
  svg {
    fill: currentColor !important;
  }

  .text-white svg {
    fill: white !important;
    color: white !important;
  }

  .text-blue-600 svg {
    fill: #2563eb !important;
    color: #2563eb !important;
  }

  .text-emerald-600 svg {
    fill: #059669 !important;
    color: #059669 !important;
  }

  .text-gray-400 svg {
    fill: #9ca3af !important;
    color: #9ca3af !important;
  }

  .text-gray-300 svg {
    fill: #d1d5db !important;
    color: #d1d5db !important;
  }

  /* Fix shadow rendering in PWA */
  .shadow-lg,
  .shadow-xl,
  .shadow-md {
    -webkit-filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
  }

  /* Fix transform animations in PWA */
  .transform {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }

  .hover\:-translate-y-0\.5:hover {
    -webkit-transform: translateY(-0.125rem) translateZ(0);
    transform: translateY(-0.125rem) translateZ(0);
  }

  /* Fix specific copy button positioning */
  .absolute.right-2.top-1\/2 {
    position: absolute !important;
    right: 0.5rem !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    -webkit-transform: translateY(-50%) !important;
  }

  /* Fix success toast positioning */
  .absolute.-top-10.right-0 {
    position: absolute !important;
    top: -2.5rem !important;
    right: 0 !important;
    z-index: 60 !important;
  }

  /* Fix modal overlays */
  .fixed.inset-0 {
    position: fixed !important;
    top: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
  }

  /* Fix modal centering in PWA */
  .fixed.inset-0.flex.items-center.justify-center {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0.5rem !important;
  }

  /* PWA Modal Optimization - Fix for edit person modal */
  .pwa-edit-modal {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    margin: 0 !important;
  }

  .pwa-edit-modal .modal-content {
    height: 100vh !important;
    overflow-y: auto !important;
    display: flex !important;
    flex-direction: column !important;
  }

  .pwa-edit-modal .modal-header {
    flex-shrink: 0 !important;
    padding: 1rem !important;
    border-bottom: 1px solid #e5e7eb !important;
  }

  .pwa-edit-modal .modal-body {
    flex: 1 !important;
    overflow-y: auto !important;
    padding: 1rem !important;
    min-height: 0 !important;
  }

  /* Fix modal sizing for larger PWA windows */
  @media (min-width: 640px) and (display-mode: standalone) {
    .pwa-edit-modal {
      width: calc(100vw - 2rem) !important;
      height: calc(100vh - 2rem) !important;
      max-width: 56rem !important; /* max-w-4xl equivalent */
      max-height: calc(100vh - 2rem) !important;
      border-radius: 0.5rem !important;
      margin: 1rem !important;
    }
  }

  /* Standard modal fixes for PWA */
  .fixed.inset-0 .max-w-4xl {
    max-width: calc(100vw - 2rem) !important;
    max-height: calc(100vh - 2rem) !important;
    margin: 1rem !important;
  }

  /* Fix flex layout issues in modals */
  .flex.flex-col {
    display: flex !important;
    flex-direction: column !important;
  }

  /* Ensure scrollable areas work properly */
  .overflow-y-auto.flex-1 {
    overflow-y: auto !important;
    flex: 1 !important;
    min-height: 0 !important;
  }
}

/* Loading States */
.loading-skeleton {
  @apply animate-pulse bg-gray-200 rounded;
}

.loading-spinner {
  @apply animate-spin rounded-full border-2 border-gray-300 border-t-primary-600;
}

/* Focus Styles for Accessibility */
.focus-visible {
  @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
}

/* Print Styles */
@media print {
  .no-print {
    display: none !important;
  }

  body {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .card {
    @apply border-2 border-gray-900;
  }

  .btn-primary {
    @apply border-2 border-primary-800;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Additional PWA Fixes for macOS */
@supports (-webkit-appearance: none) {
  /* WebKit specific fixes for macOS PWA */
  @media (display-mode: standalone) {
    /* Fix button appearance in Safari/WebKit PWA */
    button,
    input[type='button'],
    input[type='submit'] {
      -webkit-appearance: none;
      appearance: none;
    }

    /* Fix flex gap issues in WebKit */
    .gap-4 {
      gap: 1rem !important;
    }

    .gap-6 {
      gap: 1.5rem !important;
    }

    .gap-8 {
      gap: 2rem !important;
    }

    /* Fix viewport units in PWA */
    .min-h-screen {
      min-height: 100vh !important;
      min-height: -webkit-fill-available !important;
    }

    /* Fix modal positioning */
    .fixed.inset-0 {
      position: fixed !important;
      top: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      left: 0 !important;
    }
  }
}
